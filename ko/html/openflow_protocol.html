<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OpenFlow 프로토콜 &#8212; Ryubook 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="Ryubook 1.0 documentation" href="index.html" />
    <link rel="next" title="ofproto 라이브러리" href="ofproto_lib.html" />
    <link rel="prev" title="IGMP 스누핑" href="igmp_snooping.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="전체 색인"
             accesskey="I">색인</a></li>
        <li class="right" >
          <a href="ofproto_lib.html" title="ofproto 라이브러리"
             accesskey="N">다음</a> |</li>
        <li class="right" >
          <a href="igmp_snooping.html" title="IGMP 스누핑"
             accesskey="P">이전</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ryubook 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="openflow">
<span id="ch-openflow-protocol"></span><h1>OpenFlow 프로토콜<a class="headerlink" href="#openflow" title="제목 주소">¶</a></h1>
<p>이 장에서는 OpenFlow 프로토콜에 정의된 매치(match), 명령(instruction) 및
액션(action)에 대해 설명합니다.</p>
<div class="section" id="id1">
<h2>매치<a class="headerlink" href="#id1" title="제목 주소">¶</a></h2>
<p>매치에 사용할 수 있는 조건에는 여러 가지가 있으며, OpenFlow의 버전이 올라갈 때
마다 그 종류는 증가하고 있습니다. OpenFlow 1.0에서는 12 종류 였지만, OpenFlow 1.3
는 40 가지의 조건이 정의되어 있습니다.</p>
<p>개별적인 자세한 내용은 OpenFlow 스펙 등을 참조하시면 됩니다. 여기에서는
OpenFlow 1.3 Match 필드를 간단하게 소개합니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Match 필드 이름</th>
<th class="head">설명</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>in_port</td>
<td>수신 포트의 포트 번호</td>
</tr>
<tr class="row-odd"><td>in_phy_port</td>
<td>수신 포트의 물리적 포트 번호</td>
</tr>
<tr class="row-even"><td>metadata</td>
<td>테이블간에 정보를 전달하는 데 사용되는 메타 데이터</td>
</tr>
<tr class="row-odd"><td>eth_dst</td>
<td>Ethernet 대상 MAC 주소</td>
</tr>
<tr class="row-even"><td>eth_src</td>
<td>Ethernet 원본 MAC 주소</td>
</tr>
<tr class="row-odd"><td>eth_type</td>
<td>Ethernet 프레임 타입</td>
</tr>
<tr class="row-even"><td>vlan_vid</td>
<td>VLAN ID</td>
</tr>
<tr class="row-odd"><td>vlan_pcp</td>
<td>VLAN PCP</td>
</tr>
<tr class="row-even"><td>ip_dscp</td>
<td>IP DSCP</td>
</tr>
<tr class="row-odd"><td>ip_ecn</td>
<td>IP ECN</td>
</tr>
<tr class="row-even"><td>ip_proto</td>
<td>IP 프로토콜 종류</td>
</tr>
<tr class="row-odd"><td>ipv4_src</td>
<td>IPv4의 소스 IP 주소</td>
</tr>
<tr class="row-even"><td>ipv4_dst</td>
<td>IPv4의 대상 IP 주소</td>
</tr>
<tr class="row-odd"><td>tcp_src</td>
<td>TCPd 원본 포트 번호</td>
</tr>
<tr class="row-even"><td>tcp_dst</td>
<td>TCP 목적지 포트 번호</td>
</tr>
<tr class="row-odd"><td>udp_src</td>
<td>UDP 소스 포트 번호</td>
</tr>
<tr class="row-even"><td>udp_dst</td>
<td>UDP 대상 포트 번호</td>
</tr>
<tr class="row-odd"><td>sctp_src</td>
<td>SCTP의 원본 포트 번호</td>
</tr>
<tr class="row-even"><td>sctp_dst</td>
<td>SCTP 목적지 포트 번호</td>
</tr>
<tr class="row-odd"><td>icmpv4_type</td>
<td>ICMP의 Type</td>
</tr>
<tr class="row-even"><td>icmpv4_code</td>
<td>ICMP의 Code</td>
</tr>
<tr class="row-odd"><td>arp_op</td>
<td>ARP의 작동 코드</td>
</tr>
<tr class="row-even"><td>arp_spa</td>
<td>ARP의 소스 IP 주소</td>
</tr>
<tr class="row-odd"><td>arp_tpa</td>
<td>ARP의 대상 IP 주소</td>
</tr>
<tr class="row-even"><td>arp_sha</td>
<td>ARP의 소스 MAC 주소</td>
</tr>
<tr class="row-odd"><td>arp_tha</td>
<td>ARP의 대상 MAC 주소</td>
</tr>
<tr class="row-even"><td>ipv6_src</td>
<td>IPv6의 소스 IP 주소</td>
</tr>
<tr class="row-odd"><td>ipv6_dst</td>
<td>IPv6의 대상 IP 주소</td>
</tr>
<tr class="row-even"><td>ipv6_flabel</td>
<td>IPv6의 플로우 레이블</td>
</tr>
<tr class="row-odd"><td>icmpv6_type</td>
<td>ICMPv6의 Type</td>
</tr>
<tr class="row-even"><td>icmpv6_code</td>
<td>ICMPv6의 Code</td>
</tr>
<tr class="row-odd"><td>ipv6_nd_target</td>
<td>IPv6 네이버 디스커버리의 대상 주소</td>
</tr>
<tr class="row-even"><td>ipv6_nd_sll</td>
<td>IPv6 네이버 디스커버리 원본 링크 계층 주소</td>
</tr>
<tr class="row-odd"><td>ipv6_nd_tll</td>
<td>IPv6 네이버 디스커버리 타겟 링크 계층 주소</td>
</tr>
<tr class="row-even"><td>mpls_label</td>
<td>MPLS 레이블</td>
</tr>
<tr class="row-odd"><td>mpls_tc</td>
<td>MPLS 트래픽 클래스 (TC)</td>
</tr>
<tr class="row-even"><td>mpls_bos</td>
<td>MPLS의 BoS 비트</td>
</tr>
<tr class="row-odd"><td>pbb_isid</td>
<td>802.1ah PBB의 I-SID</td>
</tr>
<tr class="row-even"><td>tunnel_id</td>
<td>논리 포트에 대한 메타 데이터</td>
</tr>
<tr class="row-odd"><td>ipv6_exthdr</td>
<td>IPv6 확장 헤더의 의사 필드</td>
</tr>
</tbody>
</table>
<p>MAC 주소와 IP 주소 등의 일부 필드는 또한 마스크를 지정할 수 있습니다.</p>
</div>
<div class="section" id="id2">
<h2>명령<a class="headerlink" href="#id2" title="제목 주소">¶</a></h2>
<p>명령(instruction)은 매치에 해당하는 패킷을 수신했을 때의 동작을 정의하는
것으로, 다음과 같은 유형이 규정되어 있습니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">명령</th>
<th class="head">설명</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Goto Table (필수)</td>
<td><p class="first">OpenFlow 1.1 이상에서는 여러 개의 플로우 테이블을                               합니다. Goto Table에 의해 일치된 패킷의
처리를 지정된 플로우 테이블에서 처리하도록 할
수 있습니다. 예를 들어, &#8220;포트 1에서 받은 패킷
에 VLAN-ID 200을 추가하여 테이블 2에 보냄」이라고
플로우 항목을 설정할 수 있습니다.</p>
<p class="last">지정된 테이블 ID는 현재 테이블 ID보다 큰
값이 아니면 안됩니다.</p>
</td>
</tr>
<tr class="row-odd"><td>Write Metadata (옵션)</td>
<td>이후의 테이블에서 볼 수 있는 메타 데이터를 설정합니
다.</td>
</tr>
<tr class="row-even"><td>Write Actions (필수)</td>
<td>현재 액션 세트에 지정된 액션을 추가
합니다. 동일한 유형의 액션이 이미 설정된
경우에는 새로운 액션으로 대체됩니다.</td>
</tr>
<tr class="row-odd"><td>Apply Actions (옵션)</td>
<td>액션 세트는 변경하지 않고, 지정된 액션을
즉시 적용합니다.</td>
</tr>
<tr class="row-even"><td>Clear Actions (옵션)</td>
<td>현재 액션 세트에서 모든 액션을 제거합니다.</td>
</tr>
<tr class="row-odd"><td>Meter (옵션)</td>
<td>지정된 미터에 패킷을 적용합니다.</td>
</tr>
</tbody>
</table>
<p>Ryu는 각 명령어에 해당하는 다음 클래스가 구현되어 있습니다.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">OFPInstructionGotoTable</span></code></li>
<li><code class="docutils literal"><span class="pre">OFPInstructionWriteMetadata</span></code></li>
<li><code class="docutils literal"><span class="pre">OFPInstructionActions</span></code></li>
<li><code class="docutils literal"><span class="pre">OFPInstructionMeter</span></code></li>
</ul>
<p>Write/Apply/Clear Actions는 OPFInstructionActions에 정리하고 있고,
인스턴스 생성시에 선택합니다.</p>
<div class="admonition note">
<p class="first admonition-title">주석</p>
<p class="last">Write Actions의 지원은 스펙에서 필수로 되어 있지만, 이전 버전의
Open vSwitch에서는 구현되지 않았으며, 대신 Apply Actions를
사용해야 했었습니다.
Open vSwitch 2.1.0에서 Write Actions 지원이 추가되었습니다.</p>
</div>
</div>
<div class="section" id="id3">
<h2>액션<a class="headerlink" href="#id3" title="제목 주소">¶</a></h2>
<p>OFPActionOutput 클래스는 Packet-Out 메시지와 Flow Mod 메시지를 사용하여
패킷 전송을 지정하는 것입니다. 생성자의 인수 대상과
컨트롤러에 보내려면 최대 데이터 크기 (max_len)을 지정합니다.
대상에는 스위치의 물리적 포트 번호 외에 몇 가지 정의된 값을
지정할 수 있습니다.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">값</th>
<th class="head">설명</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OFPP_IN_PORT</td>
<td>수신 포트로 전송됩니다</td>
</tr>
<tr class="row-odd"><td>OFPP_TABLE</td>
<td>첫번째 플로우 테이블에 적용됩니다</td>
</tr>
<tr class="row-even"><td>OFPP_NORMAL</td>
<td>스위치의 L2/L3 기능으로 전송됩니다</td>
</tr>
<tr class="row-odd"><td>OFPP_FLOOD</td>
<td>수신 포트 또는 블록된 포트를 제외한 해당 VLAN의
모든 물리적 포트에 Flooding</td>
</tr>
<tr class="row-even"><td>OFPP_ALL</td>
<td>수신 포트를 제외한 모든 물리적 포트에 전송합니다</td>
</tr>
<tr class="row-odd"><td>OFPP_CONTROLLER</td>
<td>컨트롤러에 Packet-In 메시지로 보냅니다</td>
</tr>
<tr class="row-even"><td>OFPP_LOCAL</td>
<td>스위치의 로컬 포트를 지정합니다</td>
</tr>
<tr class="row-odd"><td>OFPP_ANY</td>
<td>Flow Mod (delete) 메시지 및 Flow Stats Requests 메시지
에서 포트를 선택할 때 와일드 카드로 사용하는 것으로,
패킷 전송에서 사용되지 않습니다</td>
</tr>
</tbody>
</table>
<p>max_len 0을 지정하면 Packet-In 메시지 패킷의 이진 데이터를
첨부하지 않습니다. <code class="docutils literal"><span class="pre">OFPCML_NO_BUFFER</span></code> 을 지정하면 OpenFlow 스위치
에서 패킷을 버퍼없이 Packet-In 메시지 패킷 전체가 첨부됩니다.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">목차</a></h3>
  <ul>
<li><a class="reference internal" href="#">OpenFlow 프로토콜</a><ul>
<li><a class="reference internal" href="#id1">매치</a></li>
<li><a class="reference internal" href="#id2">명령</a></li>
<li><a class="reference internal" href="#id3">액션</a></li>
</ul>
</li>
</ul>

  <h4>이전 항목</h4>
  <p class="topless"><a href="igmp_snooping.html"
                        title="이전 장">IGMP 스누핑</a></p>
  <h4>다음 항목</h4>
  <p class="topless"><a href="ofproto_lib.html"
                        title="다음 장">ofproto 라이브러리</a></p>
  <div role="note" aria-label="source link">
    <h3>현재 문서</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/openflow_protocol.txt"
            rel="nofollow">소스 코드를 보려면</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>빠른 검색</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="바로 가기" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>탐색</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="전체 색인"
             >색인</a></li>
        <li class="right" >
          <a href="ofproto_lib.html" title="ofproto 라이브러리"
             >다음</a> |</li>
        <li class="right" >
          <a href="igmp_snooping.html" title="IGMP 스누핑"
             >이전</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ryubook 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, RYU project team.
    </div>
  </body>
</html>